generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// 経歴テーブル
model Career {
  id             Int               @default(autoincrement()) @id
  /// 会社名
  company        String
  /// ホームページURL
  url            String
  /// 雇用形態
  employmentType EmploymentType
  /// 開始日
  startDate      DateTime
  /// 終了日（現職の場合はnull）
  endDate        DateTime?
  /// 業務内容の説明
  description    String
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  @@index([startDate])
  @@map("careers")
}

/// 実績テーブル
model Achievement {
  id             Int               @default(autoincrement()) @id
  /// 開始日
  startDate   DateTime
  /// 終了日（現職の場合はnull）
  endDate     DateTime?
  /// 実績の説明
  description String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  skills      SkillTag[] @relation("AchievementToSkillTag")

  @@map("achievements")
}

/// 経歴タグテーブル
model SkillTag {
  id             Int               @default(autoincrement()) @id
  name         String        @unique
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  achievements Achievement[] @relation("AchievementToSkillTag")

  @@map("skill_tags")
}

/// 資格テーブル
model Qualification {
  id             Int               @default(autoincrement()) @id
  name       String   @unique
  /// 取得年年月
  acquiredAt DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("qualifications")
}

enum EmploymentType {
  FULL_TIME
  PART_TIME
  CONTRACT
  TEMPORARY
  INTERN
}
