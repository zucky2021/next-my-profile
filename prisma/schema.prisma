generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

/// 経歴テーブル
model Career {
  id             Int            @id @default(autoincrement())
  /// 会社名
  company        String
  /// ホームページURL
  url            String
  /// 雇用形態
  employmentType EmploymentType
  /// 開始日
  startDate      DateTime
  /// 終了日（現職の場合はnull）
  endDate        DateTime?
  /// 業務内容の説明
  description    String
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  @@index([startDate])
  @@map("careers")
}

/// 実績テーブル
model Achievement {
  id          Int        @id @default(autoincrement())
  /// 開始日
  startDate   DateTime
  /// 終了日（現職の場合はnull）
  endDate     DateTime?
  /// 実績の説明
  description String
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  skills      SkillTag[] @relation("AchievementToSkillTag")

  @@map("achievements")
}

/// スキルタグテーブル
model SkillTag {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  achievements Achievement[] @relation("AchievementToSkillTag")

  @@map("skill_tags")
}

/// 資格テーブル
model Qualification {
  id         Int      @id @default(autoincrement())
  name       String   @unique
  /// 取得年月
  acquiredAt DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("qualifications")
}

/// 趣味テーブル
model Hobby {
  id            Int      @id @default(autoincrement())
  /// タイトル
  title         String
  /// 説明
  description   String
  /// アイコン（絵文字）
  icon          String
  /// 詳細（JSON配列）
  details       String[] @db.Text
  /// 関連スキル（JSON配列）
  relatedSkills String[] @db.Text
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("hobbies")
}

/// 雇用形態
enum EmploymentType {
  FULL_TIME // 正社員
  PART_TIME // パート・アルバイト
  CONTRACT // 契約社員
  TEMPORARY // 派遣社員
  INTERN // インターン
}
